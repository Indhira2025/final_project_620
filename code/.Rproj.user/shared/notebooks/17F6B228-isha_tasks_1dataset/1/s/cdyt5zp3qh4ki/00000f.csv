"0","resp_analysis <- excess_death %>%"
"0","  mutate("
"0","    pneumonia_alone = as.numeric(pneumonia_deaths) - as.numeric(pneumonia_and_covid_19_deaths),"
"0","    resp_deaths = pneumonia_alone"
"0","  ) %>%"
"0","  group_by(mmwr_week, year) %>%"
"0","  summarize("
"0","    pneumonia_deaths = sum(resp_deaths, na.rm = TRUE),"
"0","    covid_19_deaths = sum(covid_19_deaths, na.rm = TRUE),"
"0","    excess_deaths_total = sum(excess_deaths, na.rm = TRUE),"
"0","    .groups = ""drop"""
"0","  ) %>%"
"0","  left_join(future_weeks, by = c(""year"", ""mmwr_week"")) %>%"
"0","  mutate(diff_resp = pneumonia_deaths - expected_resp_deaths,"
"0","    excess_resp_only = ifelse(diff_resp > 0, diff_resp, 0),"
"0","    covid_plus_resp = covid_19_deaths + excess_resp_only,"
"0","    residual_covid_only = excess_deaths_total - covid_19_deaths,"
"0","    residual_covid_plus_resp = excess_deaths_total - covid_plus_resp,"
"0","    residual_difference = 100*(residual_covid_only - residual_covid_plus_resp)/residual_covid_only"
"0","  )"
"0",""
"0","ggplot(resp_analysis, aes(x = covid_19_deaths, y = residual_covid_plus_resp)) +"
"0","  geom_point() +"
"0","  labs(x = ""Covid-19 Deaths"", y = ""Excess Pneumonia Mortality"") +"
"0","  theme_minimal() +"
"0","  geom_hline(yintercept = 0, color = ""red"")"
